\documentclass[../../projlab]{subfiles}
\begin{document}

\makeatletter

\ifSubfilesClassLoaded{
	\coverpage{7. Leadás}
	%\renewcommand{\filePath}[1]{./../../ #1}
	\def\filePath[#1]{./../../#1}
}{}

\makeatother


\chapter{Prototípus koncepciója}
\setcounter{section}{-1}

\section{Változás hatása a modellre}

\subsection{Módosult osztálydiagram}
\begin{figure}[H] 
    \centering 
    \includegraphics[width=1\textwidth]{docs/bead07/Diagrams/class-diag.eps} 
    \caption{} 
\end{figure} 

\subsection{Új vagy megváltozott metódusok}

\textbf{A bevezetett új osztályok}

\subsubsection{IInvertory interface}
\begin{class-template-responsibility}
    A különböző tárolók közös interface-e
\end{class-template-responsibility}
\begin{class-template-method}
    \classitem{+getItems(): List<Item>}
                {Visszaadja a tárolt nyersanyagok listáját.}
    \classitem{+tryInsertItem(i: Item): bool}
                {Visszaadja, hogy az adott tárgy belehelyezhető-e a tárhelybe.}
    \classitem{+insertItem(i: Item): bool}
                {Az adott tárgyat belehelyezzük a tárhelybe.}
    \classitem{+removeItem(i: Item): bool}
                {Az adott tárgyat kiveszzük.}                
\end{class-template-method}

\subsubsection{AsteroidInvertory}
\begin{class-template-responsibility}
    Az aszteroida tárhelyének reprezentációja.
\end{class-template-responsibility}
\begin{class-template-interface}
    IInventory
\end{class-template-interface}
\begin{class-template-attribute}
    \classitem{+items: List<Item>}{A tárolt nyersanyagok listája}
\end{class-template-attribute}

\subsubsection{SSInvertory}
\begin{class-template-responsibility}
    Az űrhajók tárhelyének reprezentációja.
\end{class-template-responsibility}
\begin{class-template-interface}
    IInventory
\end{class-template-interface}
\begin{class-template-attribute}
    \classitem{+items: List<Item>}{A tárolt nyersanyagok listája}
    \classitem{+tgs: List<TeleportGateItem>}{A tárolt kapuk listája}
\end{class-template-attribute}

\subsubsection{InfiniteInvertory}
\begin{class-template-responsibility}
    Az ufo tárhelyének reprezentációja. Bármennyi tárgy eltárolható benne.
\end{class-template-responsibility}
\begin{class-template-interface}
    IInventory
\end{class-template-interface}
\begin{class-template-attribute}
    \classitem{+items: List<Item>}{A tárolt nyersanyagok listája}
\end{class-template-attribute}

\subsubsection{UFO}
\begin{class-template-responsibility}
    Az ufokat reprezentálja.
    Az aszteroidaöv nyersanyagaira fáj a foga, azokat akarja eltulajdonítani, de nem tud fúrni. Éppen ezért a telepesek ellenségeinek tekinthető.
\end{class-template-responsibility}
\begin{class-template-baseclass}
    Entity \baseclass MovableEntity \baseclass Vessel
\end{class-template-baseclass}
\begin{class-template-attribute}
    \classitem{\#getInvertory(): IInvertory}{Visszaadja az UFO raktárát.}
\end{class-template-attribute}

\textbf{A korábbi osztályokban történt módosítások}

\subsubsection{SpaceShip}
\begin{class-template-responsibility}
    Egy telepest reprezentáló osztály.
\end{class-template-responsibility}
\begin{class-template-baseclass}
    Entity \baseclass MovableEntity \baseclass Vessel
\end{class-template-baseclass}
\begin{class-template-attribute}
    \classitem{\#lastPlacedGate}{Törölve}
\end{class-template-attribute}
\begin{class-template-method}
    \classitem{\#getInvertory(): IInvertory}{Visszaadja a telepes által folyamatosan hordozott raktárat.}
\end{class-template-method}


\subsubsection{TeleportGate}
\begin{class-template-responsibility}
    A teleportkapukat reprezentáló osztály.
\end{class-template-responsibility}
\begin{class-template-baseclass}
    Entity \baseclass MovableEntity \baseclass Building
\end{class-template-baseclass}
\begin{class-template-attribute}
    \classitem{\-gateID: int}{A kapuk összekötéséhez használt ID}
\end{class-template-attribute}

\subsubsection{Building}
\begin{class-template-responsibility}
    Az épülettípusok közös ősosztálya.
\end{class-template-responsibility}
\begin{class-template-baseclass}
    Entity \baseclass MovableEntity  (Új ősosztály)
\end{class-template-baseclass}

\subsubsection{Entity}
\begin{class-template-responsibility}
    Egy adott entitás ( vizuális megjelenítéssel rendelkező játékelem) osztálya. 
\end{class-template-responsibility}
\begin{class-template-method}
    \classitem{+explode(): void}{Az adott entitás felrobban.}
\end{class-template-method}

\subsubsection{AsteroidPlaces (enum)}
\begin{class-template-responsibility}
    Régi név: BuildingPlace
    Azt írja le hogy egy MovableEntity hol helyezkedhet el az aszteroidán.
\end{class-template-responsibility}
\begin{class-template-attribute}
    \classitem{inside}{Az aszteroida belseje }
    \classitem{orbit}{Az aszteroida körül fix pályán}
    \classitem{vessel}{Az aszteroida mellet lévő járművek}
\end{class-template-attribute}

\subsubsection{Asteroid}
\begin{class-template-responsibility}
    Egy aszteroidát jelöl. Minden példányának létrejöttekor beállítódnak a generátor által a tulajdonságai.
\end{class-template-responsibility}
\begin{class-template-attribute}
    \classitem{-stationed: Vessel[0..*]}{A jelenleg itt lévő Vesselek}
    \classitem{-orbit: MovableEntity[0..*]}{A jelenleg itt pályán lévő dolgok}
    \classitem{-inside: MovableEntity[0..*]}{A jelenleg ebben az aszetoidában lévő dolgok}
    \classitem{-mined:bool}{Azt tárolja, hogy ki volt-e bányászva az aszteroida. }
\end{class-template-attribute}
\begin{class-template-method}
    \classitem{GetPhysicalNeighbours():Asteroid[1..*]}{A fizikailag szomszédos aszteroidákat adja vissza.}
\end{class-template-method}



\subsubsection{Vessel}
\begin{class-template-responsibility}
    Egy-egy járműért (pl. telepes vagy robot) felelős osztály. 
    A bányászást is ebbe az osztályba mozgattuk.
\end{class-template-responsibility}
\begin{class-template-method}
    \classitem{\#getInventory(): IInvertory}{Visszaadja az űrjármű által folyamatosan hordozott raktárat.}
    \classitem{+mine(): void}{A függvény megegyezik a régen a SpaceShip osztályban lévővel, az aszteroidából fogunk tudni nyersanyagot kivenni.}
\end{class-template-method}


\subsubsection{Inventory}
\begin{class-template-responsibility}
    Törölve
\end{class-template-responsibility}

\subsubsection{Item}
\begin{class-template-attribute}
    \classitem{amount: int}{Törölve}
    \classitem{inv: IInvnetory}{A tároló amiben jelenleg vagyunk}
\end{class-template-attribute}
\begin{class-template-method}
    \classitem{+nearSun(): void}{Mi történjen, ha közel kerül a nyersanyag a naphoz, és napfény éri.}
\end{class-template-method}

\subsubsection{Resource}
\begin{class-template-baseclass}
    Item
\end{class-template-baseclass}
\begin{class-template-attribute}
    \classitem{amount: int}{Törölve}
\end{class-template-attribute}

\subsubsection{Iron}
\begin{class-template-baseclass}
    Item
\end{class-template-baseclass}

\subsubsection{Ice}
\begin{class-template-baseclass}
    Item
\end{class-template-baseclass}

\subsubsection{Coal}
\begin{class-template-baseclass}
    Item
\end{class-template-baseclass}

\subsubsection{Titanium}
\begin{class-template-responsibility}
    Régi név: Titan
\end{class-template-responsibility}
\begin{class-template-baseclass}
    Item
\end{class-template-baseclass}

\subsubsection{Uranium}
\begin{class-template-baseclass}
    Item
\end{class-template-baseclass}
\begin{class-template-attribute}
    \classitem{+counter: int}{Számolja, hogy hányszor lett kitéve napsugárzásnak az adott nyersanyag.}
\end{class-template-attribute}

\subsubsection{IronResorce}
\begin{class-template-responsibility}
    Törölve
\end{class-template-responsibility}

\subsubsection{IceResource}
\begin{class-template-responsibility}
    Törölve
\end{class-template-responsibility}

\subsubsection{CoalResource}
\begin{class-template-responsibility}
    Törölve
\end{class-template-responsibility}

\subsubsection{TitaniumResorce}
\begin{class-template-responsibility}
    Törölve
\end{class-template-responsibility}

\subsubsection{UraniumResource}
\begin{class-template-responsibility}
    Törölve
\end{class-template-responsibility}

\subsubsection{TeleportGateRecipe}
\begin{class-template-attribute}
    \classitem{amount: int}{Törölve}
\end{class-template-attribute}
\begin{class-template-method}
    \classitem{+CanCraft(Invertory inv, Asteroid a): bool}
                {Az ősosztály metódusát írjuk felül, mert ellenőrizni kell a telepes tárhelyében kévő teleportkapujainak számát.}
\end{class-template-method}

\subsection{Szekvencia-diagramok}

%\comment{Az analízis modell szekvenciadiagramjaiból a változás által érintett, előírt, módosítottdiagramok}

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/TG-SolarFlare.eps} 
    \caption{} 
\end{figure}

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/Uranium/uran-counter} 
    \caption{} 
\end{figure}

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/SolarFlare/solar-flare} 
    \caption{} 
\end{figure}

\begin{figure}[H] 
    \centering 
    \includegraphics[width=1\textwidth]{docs/bead07/Diagrams/Craft/CanCraft} 
    \caption{A recepthez szükséges nyersanyagokat egyenként, és nem típusonként tároljuk, ezért megváltoztak az ellenőrzés lépései. A két raktár nyersanyagkészletét lemásoljuk, és ha megtaláljuk a keresett összetevőket, eltávolítjuk a lemásolt listákból, így az eredeti lista tartalma sikertelen készítés esetén sem fog változni. } 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=1\textwidth]{docs/bead07/Diagrams/Craft/CanCraftGate} 
    \caption{A teleportkapuk előállításának ellenőrzése speciális eset lesz, mert itt ellenőrizni kell, hogy elférnek-e a telepes raktárában a kapuk készítés után.} 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=1\textwidth]{docs/bead07/Diagrams/Craft/Craft} 
    \caption{A raktárak megváltozott elemkészlete miatt (minden nyersanyag külön van tárolva) az ellenőrzés, eltávolítás folyamata megváltozott, egyenként távolítjuk el az összetevőket. } 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/Craft/Gate_MakeResult} 
    \caption{A teleportkapu-párok tagjait külön tároljuk, így 2 kaput hozunk létre, és hozzájuk rendelünk egy közös azonosítót.} 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.5\textwidth]{docs/bead07/Diagrams/Inventory/InsertItemtoInfinite} 
    \caption{Egy tárgy elhelyezése az UFO tárolójába} 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.5\textwidth]{docs/bead07/Diagrams/Inventory/InsertItemtoSSinventory} 
    \caption{Egy tárgy elhelyezése a SpaceShip tárolójába} 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/Inventory/InsertTeleportGatetoInventory} 
    \caption{Egy TeleportGate elhelyezése az SpaceShip tárolójába} 
\end{figure}

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/Mine/Vessel-mine} 
    \caption{A játékos bányászik egy aszteroidából} 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/Move/Move-ME-to-asteroid} 
    \caption{A MoveableEntity mozgatása} 
\end{figure} 

\begin{figure}[H] 
    \centering 
    \includegraphics[width=0.7\textwidth]{docs/bead07/Diagrams/Explode/Uran-explode} 
    \caption{A MoveableEntity mozgatása} 
\end{figure} 


\section{Prototípus interface-definíciója}

Az alkalmazás minden parancsot a standard input-ról olvas be és értelmez. A teszeseteket a meghatározott módon lehet majd végrehajtani.
A kimenet a standard output-ra kerül kiíratásra.
\subsection{Az interfész általános leírása}

A program standard input-ot használva vezérelhető a megadott parancsok segítségével. Minden tesztesetet a tesztelő a meghatározott parancsok és paraméterek előre definiált sorrendben való kiadásával hajtja végre. Egyedi tesztesetek is létrehozhatóak, ezek ellenőrzésért a tesztelő felelős.
Minden esetben a kimenet standard output-ra kerül kiíratásra.
\subsection{Bemeneti nyelv}

\subsubsection{Bemeneti parancsok}

\begin{itemize}
    \item help
    \begin{itemize}
        \item Leírás: Kilistázza az összes lehetséges parancsot
        \item Opciók: help
    \end{itemize}


    \item startgame
    \begin{itemize}
        \item Leírás: 
        \item Opciók: startgame <seed> <file name>
        \begin{itemize}
            \item seed: a véletlen szám generátor által hasznát kezdőérték. \newline
Ha 0-t adnak meg a seednek akkor a játék semmilyen véletlenszerű tevékenységet nem fog végezni
            \item file name: A felhasználó adja meg a játéktér leírását tartalmazó file-t
        \end{itemize}
    \end{itemize}

    \item move
    \begin{itemize}
        \item Leírás: A játékos egy járművet akar mozgatni. \newline
            A parancs megkérdezi a játékostól, hogy melyik aszteroidára akarja mozgatni a járművet.
        \item Opciók: move <vessel>
        \begin{itemize}
            \item vessel: A jármű amit mozgatni akarunk
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> move ss_001
Neighbours:
01 - Asteroid_1  - ?
02 - Asteroid_34 - Iron
03 - Asteroid_9  - Coal
04 - Asteroid_11 - ?
> 04
ss_001 Moved to Asteroid_11
            \end{verbatim}
    \end{itemize}


    \item neighbours
    \begin{itemize}
        \item Leírás: A játékos lekéri az aszteroida szomszédjait
        \item Opciók: neighbours <asteroid>
        \begin{itemize}
            \item asteroid: Az aszteroida aminek a szomszédjait akarjuk lekérdezni.
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> neighbours ss_001
Neighbours:
01 - Asteroid_1  - ?
02 - Asteroid_34 - Iron
03 - Asteroid_9  - Coal
04 - Asteroid_11 - ?
            \end{verbatim}
    \end{itemize}


    \item drill
    \begin{itemize}
        \item Leírás: A játékos a megadott járművel fúr azon az aszteroidán amin éppen van.
        \item Opciók: drill <vessel>
        \begin{itemize}
            \item vessel: A jármű amivel fúrni akarunk.
        \end{itemize}
        \item Példa 1:
            \begin{verbatim}
> drill ss_001 
Asteroid_42 crust = X
            \end{verbatim}
        \item Példa 2:
            \begin{verbatim}
> drill ss_001 
can't drill
            \end{verbatim}
    \end{itemize}


    \item mine
    \begin{itemize}
        \item Leírás: A játékos a megadott járművel megpróbál bányászni azon az aszteroidán amin éppen van.
        \item Opciók: mine <vessel>
        \begin{itemize}
            \item vessel: A jármű amivel bányászni akarunk.
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> mine ss_001
Asteroid_35 mined
* Item: Iron
            \end{verbatim}
    \end{itemize}


    \item status
    \begin{itemize}
        \item Leírás: A játékos a megadott entitás jelenlegi állapotát kérdezi le.
        \item Opciók: status <vessel|asteroid>
        \begin{itemize}
            \item vessel: A jármű aminek az állapotát kérdezzük le.
            \item asteroid: Az aszteroida aminek az állapotát kérdezzük le.
        \end{itemize}
        \item Példa 1:
            \begin{verbatim}
> status ss_001
Turn used: false
Asteroid: Asteroid_67 | Not hidden
Resources:
- Iron
- Iron
- Coal
- Uranium Exp:2
Teleport Gates:
- Tg_023 - 1
- Tg_023 - 1
- Tg_011 - 5
            \end{verbatim}
        \item Példa 2:
            \begin{verbatim}
> status Asteroid_67
Crust: 0
Vessels:
- SpaceShip_01
- SpaceShip_23
- Robot_4
Resources:
- Iron
- Iron
Teleport Gates:
- Tg_023 - 1
- Tg_011 - 5
            \end{verbatim}        
    \end{itemize}


    \item hide
    \begin{itemize}
        \item Leírás: A játékos a megadott járművet elbújtatja az aszteroidában amin tartózkodik.
        \item Opciók: hide <enter|exit> <vessel>
        \begin{itemize}
            \item vessel: A jármű aminek az állapotát kérdezzük le.
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> hide enter ss_001
Can't hide
            \end{verbatim}
        \item Példa:
            \begin{verbatim}
> hide enter ss_001
ss_001 is hidden
            \end{verbatim}            
    \end{itemize}


    \item craft
    \begin{itemize}
        \item Leírás: A játékos egy űrhajón legyárt egy adott receptet.
        \item Opciók: craft <spaceShip> <recipe>
        \begin{itemize}
            \item spaceShip: Az űrhajó amin akarunk gyártani
            \item recipe: A recept amit le akarunk gyártani
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> craft ss_001 <recipe>
Can't craft .......
--
Succesful
            \end{verbatim}
    \end{itemize}


    \item place
    \begin{itemize}
        \item Leírás: A játékos egy űrhajóból lerak egy nyersanyagot az aszteroidába amin van.
        \item Opciók: place <resource> from <vessel>
        \begin{itemize}
            \item resource: a nyersanyag amit le akarunk rakni
            \item vessel: A jármű amin akarunk gyártani
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> place from ss_001
Items:
1. Iron
2. Uranium Exp:1
3. Uranium Exp:2
> 2
Placed Uranium Exp:1
            \end{verbatim}
    \end{itemize}

    \item pickup
    \begin{itemize}
        \item Leírás: A játékos egy űrhajóból Felvesz egy nyersanyagot az aszteroidába amin van.
        \item Opciók: pickup <resource> to <vessel>
        \begin{itemize}
            \item resource: a nyersanyag amit le akarunk rakni
            \item vessel: A jármű amin akarunk gyártani
        \end{itemize}
        \item Példa:
            \begin{verbatim}
> pickup Coal to ss_001
            \end{verbatim}
    \end{itemize}


    \item endturn
    \begin{itemize}
        \item Leírás: A játékos befejezi a kört, ezzel a következő játékosnak adja át a kört.
        \item Opciók: endturn
        \item Példa:
            \begin{verbatim}
> endturn
Next player: player_2 
            \end{verbatim}
    \end{itemize}

    \item solarFlare
    \begin{itemize}
        \item Leírás: Beütemez egy napvihart a kör végére.
        \item Opciók: solarFlare <pos> <radius>
            \begin{itemize}
                \item pos: A napvihar pozíciója.
                \item radius: A napvihar ebben a körben hat.
            \end{itemize}
        \item Példa:
            \begin{verbatim}
> solarFlare 20 10 5
A solar flare will happen at 20,10 with radius 5
            \end{verbatim}
    \end{itemize}

    \item solarDistance
    \begin{itemize}
        \item Leírás: Módosítja a naptól való távolságot.
        \item Opciók: solarDistance <distance>
            \begin{itemize}
                \item distance: A napvihar pozíciója.
            \end{itemize}
        \item Példa:
            \begin{verbatim}
> solarDistance 10
            \end{verbatim}
    \end{itemize}

\end{itemize}

A robotok és UFOk irányítására az álltaluk végezhető parancsok használhatóak: \newline
Robotok
\begin{itemize}
    \item move
    \item drill
\end{itemize}
UFO
\begin{itemize}
    \item move
    \item mine
\end{itemize}

\subsubsection{Pályfájl (mentés) formátuma}
Az alább található példa egy pályafájlra ("map\_syntax.vsgstd"). A kommentelt részben olvashatók leírások az adott elemekhez.
\begin{verbatim}
# A pályafájl példa
# - azt jelenti, hogy a sor továbi része ki van kommentezve
# A fájl formátuma hasonlít az XML-éhez 

#{típus attrib1="" attrib2=""} például az elején a Game Manager
#
#{/típus}

# Vannak olyan objektumok, amelyeknek csak attribútumai lehetnek, más alobjektumai nem, vagy névvel hivatkozva vannak. Ezeket nem kell lezárni {\típus}-sal.
#
#{levél név=""}

{player name="sajt"} # Játékos létrehozása, name - név
# Fontos, hogy ne adjunk meg ugyanolyan nevet az objektumainknak, minden objektum egyedi nevet kapjon

{player name="keksz"}


# Igaz-hamis étékeknél y/yes/t/true és n/no/f/false is elfogadott!
{astList name="" sunDist="" gameEnded="" solarStormQueued=""} # A GameManager és a Scene létrehozásáért felelős. Minden lehetséges attribútum bele van írva.

	{asteroid name="a1" exploded="" coreSize="" maxHidingSpace="1" crustSize="" revealed="" visited=""}# Egy aszteroida leírása.
	
		{asteroidInventory} # Mi van az aszteroidában, TP kapu nem lehet benne!
		
			{coal} # Egy szén nyersanyag.
		
			{titanium} # Egy titanium.
		
			{ice} # Egy jég nyersanyag.
		
			{iron} # Egy vas nyersanyag.
		
		{uranium counter=""} # Egy uránium nyersanyag. A counter a hevültséget méri, értéke 0-2.
		
		{/asteroidInventory}
		
		{insideAsteroid} 	# Az aszteroida belsejében lévők (inside, NEM elbújtak!)
		
			#{spaceStation name=""} Nyílván megnyernénk a játékot, ha magától le lenne helyezve.
		
		{/insideAsteroid}
		
		{orbitAsteroid}	# Orbit, legfeljebb öt elem lehet itt
		
			{telegate name="" teleId="1"} # Teleportkapu. Hiba ha 3 vagy több olyan kapu van - akár tárgyként vagy lehelyezve -, aminek ugyanaz ai id-je!
			
			{telegate name="" teleId="2"}
		
		{/orbitAsteroid}
		
		{vesselsOnAsteroid} # űrjárművek
		
			{robot name="" ownerPlayer="keksz" isHidden=""} # Nyílván több robot is el lehet bújva
			
			{ufo name=""}	# Az UFO leírása; egy AI játékoshoz lesz rendelve.
			
				{ufoInventory}  # Egy UFO tárhelye
				
					{coal}
				
					{titanium}
					
					{ice}
					
					{iron}
					
					{uranium counter=""}
					
				{/ufoInventory}
			
			{/ufo}
			
			{spaceShip name="" ownerPlayer="keksz" isHidden="" } # Hiba, ha több mint egy van elbújva, vagy nem lehetne elbújni, de isHidden az igaz!
			
				{spaceShipInventory}  # Egy űrjóhajós nyersanyag tárhelye. Természetesen legfeljebb 10 nyersanyag és 3 kapu lehet benne!
				
					{resources} # Nyersanyagok
					#...
					{/resources}

					{telegates} # Kapuk

						{telegateItem name="" teleId="3"}
					
						{telegateItem name="" teleId="3"}

					{/telegates}
				
				{/spaceShipInventory}
			
			{/spaceShip}
		
		{/vesselsOnAsteroid}
	
	{/asteroid}
	
	# Ha nincsnek megadva a tárhely listák, akkor feltételezzük, hogy üresek.
	{asteroid name="a2" exploded="" coreSize="" maxHidingSpace="1" crustSize="" revealed="" visited=""}
	
	{/asteroid}
	
	{asteroid name="a3" exploded="" coreSize="" maxHidingSpace="1" crustSize="" revealed="" visited=""}
	
	{/asteroid}
	
	{asteroid name="a4" exploded="" coreSize="" maxHidingSpace="1" crustSize="" revealed="" visited=""}
	
	{/asteroid}

{/astList}

{astRelations} # Szomszédsági listája az aszteroidáknak.

	{neighbours ast1="a1" ast2="a2"} # a1 aszteroida szomszédos legyen a2-val. Ne adjunk meg többszörös éleket!
	
	{neighbours ast1="a1" ast2="a3"}
	
	{neighbours ast1="a3" ast2="a2"}
	
	{neighbours ast1="a3" ast2="a4"}

{/astRelations}
\end{verbatim}


\subsubsection{Események}
Továbbá a program bizonyos események után lehet hogy eseményekről értesít minket.
Például:
\begin{verbatim}
[Event] Asteroid_42 exploded
[Event] ss_001 exploded
\end{verbatim}

%\comment{Ha szükséges, meg kell adni a konfigurációs (pl. pályaképet megadó) fájlok nyelvtanát is.}

\subsection{Kimeneti nyelv}
%\comment{Egyértelműen definiálni kell, hogy az egyes bemeneti parancsok végrehajtása után előálló állapot milyen formában jelenik meg a szabványos kimeneten. A program képes legyen olyan kimenetet előállítani, amellyel az objektumok állapota ellenőrizhető (pl. save). Ebben az alfejezetben is precízen definiálni kell, hogy a kimenet nyelve milyen elemekből és milyen szintakszissal áll elő.}

A kimeneten minden parancs végrehajtása után megjelenik a változtatott objektumok állapota. Ezen kívűl a futás közben is lekérdezhetőek ezek az adatok a status parancsot használva.
Az így előállt kimenet a következő mintát követi:
\begin{verbatim}
...
Osztály: Név
Belső változók: értékek
...
\end{verbatim}

Ezen kívűl az előző pontban is említett [Event]-el ellátott értesítések is kiírásra kerülnek.
pl.:
\begin{verbatim}
...
[Event] asteroid exploded
...
\end{verbatim}



\section{Összes részletes use-case}
\begin{use-case}
    {startgame}
    {A játékos elindítja a játékot.}
    {Játékos} 
    \textbf{A} A játékos kiad egy startgame <seed> input parancsot\newline
    \textbf{A.1} Az indítás sikeres \newline
    \textbf{A.2} Az indítás sikertelen \newline
    \textbf{B} A játékos kiad egy startgame <seed> generate parancsot\newline
	\textbf{B.1} Az indítás sikeres \newline
    \textbf{B.2} Az indítás sikertelen 

\end{use-case}

\begin{use-case}
    {move}
    {A játékos mozgatja az egyik járművet.}
    {Játékos} 
    \textbf{A} A játékos kiadja a move <vessel> <to> parancsot \newline
	\textbf{A.1} Az mozgatás sikeres \newline
    \textbf{A.2} Az mozgatás sikertelen

\end{use-case}

\begin{use-case}
    {neighbours}
    {A játékos megnézi egy aszteroida környezetét.}
    {Játékos} 
    \textbf{A} A játékos kiadja a neighbours <asteroid> parancsot \newline
	\textbf{A.1} Az elérhető aszteroidák kiíratásra kerülnek

\end{use-case}

\begin{use-case}
    {drill}
    {A játékos egy járművel próbál fúrni.}
    {Játékos} 
    \textbf{A} A fúrás sikeres \newline
    \textbf{B.1} A fúrás sikertelen (Már át van fúrva a kéreg) \newline
    \textbf{B.2} A fúrás sikertelen (A jármű nem tud fúrni) \newline
\end{use-case}

\begin{use-case}
    {mine}
    {A játékos egy járművel próbál bányászni.}
    {Játékos} 
    \textbf{A} A bányászás sikeres \newline
    \textbf{B.1} A bányászás sikertelen (Nincs elég tárhely) \newline
    \textbf{B.2} A bányászás sikertelen (Nincs mit bányászni) \newline
    \textbf{B.3} A bányászás sikertelen (Nincs átfúrva a kéreg) \newline
    \textbf{B.4} A bányászás sikertelen (A jármű nem tud bányászni) \newline
\end{use-case}

\begin{use-case}
    {status}
    {A játékos lekérdezi egy jármű vagy aszteroida státuszát}
    {Játékos} 
    \textbf{A} A játékos lekérdezi egy Jármű státuszát \newline
    \textbf{B} A játékos lekérdezi egy Aszteroida státuszát
\end{use-case}

\begin{use-case}
    {hide}
    {A játékos megkér egy űrhajót arra hogy elbujjon.}
    {Játékos} 
    \textbf{A} A játékos kiad egy hide parancot \newline
    \textbf{A.1} Sikeresen elbújik a jármű \newline
    \textbf{A.2} A jármű nem tud elbújni.
\end{use-case}

\begin{use-case}
    {craft}
    {A játékos legyártat egy receptaet egy űrhajón}
    {Játékos} 
    \textbf{A} A játékos kiad egy craft parancot \newline
    \textbf{A.1} A gyártás sikeres \newline
    \textbf{A.2.a} A gyártás sikertelen (nincs elég nyersanyag)
    \textbf{A.2.b} A gyártás sikertelen (nincs elég tárhely)
\end{use-case}

\begin{use-case}
    {place}
    {A játékos lerakat egy nyersanyagot az aszteroidába}
    {Játékos} 
    \textbf{A} A játékos kiad egy place parancot \newline
    \textbf{A.1} A lerakás sikeres \newline
    \textbf{A.2} A lerakás sikertelen 
\end{use-case}

\begin{use-case}
    {pickup}
    {A játékos felvetet egy nyersanyagot az aszteroidából}
    {Játékos} 
    \textbf{A} A játékos kiad egy pickup parancot \newline
    \textbf{A.1} A felvétel sikeres \newline
    \textbf{A.2} A felvétel sikertelen 
\end{use-case}


\section{Tesztelési terv}
%\comment{A tesztelési tervben definiálni kell, hogy a be- és kimeneti fájlok egybevetésével miként végezhető el a program tesztelése. Meg kell adni teszt forgatókönyveket. Az egyes teszteket elég informálisan, szabad szövegként leírni. Teszt-esetenként egy-öt mondatban. Minden teszthez meg kell adni, hogy mi a célja, a proto mely funkcionalitását, osztályait stb. teszteli. Az alábbi táblázat minden teszt-esethez külön-külön elkészítendő.}

\test{Move movable entity}
{Mozgatható entitás mozgatása egy szomszédos aszteroidára}
{Sikeresen mozgás a pályán}

\test{Vessel moves through teleport gate}
{Járművek mozgása egy szomszédos aszteroidára teleportkapun keresztül}
{Teleportkapuk szomszédossá tesznek két aszteroidát.}

\test{Robot/SpaceShip drills}
{Robot/Telepes fúr az adott aszteroida köpenyébe, mélyíti azt.}
{Robot/Telepes segít átfúrni az aszteroidákat.}

\test{Robot/SpaceShip can't drill because of core size}
{A robot/telepes próbál fúrni egy aszteroida köpenyébe, de nem lehetséges, mert át van fúrva.}
{A robot/telepes lépése meghiúsul, egy átfúrt magú aszteroida nem fúrható tovább. }

\test{Robot/SpaceShip can't drill because of explosion}
{A robot/telepes próbál fúrni egy aszteroida köpenyébe, de nem lehetséges, mert felrobbant az aszteroida.}
{A robot/telepes lépése meghiúsul, egy felrobbant aszteroida nem fúrható tovább. }

\test{Craft robot}
{A telepes a szükséges nyersanyagokkal egy robotot készít el. }
{Az adott nyersanyagokból elkészül egy robot, amit az adott játékos irányít. }

\test{Can't craft robot}{A telepes egy robotot szeretne elkészíteni, de nincs elegendő nyersanyaga hozzá. }{Robot sikertelen készítése}
\test{Craft space station}{A telepes a szükséges nyersanyagokkal egy űrállomást készít el, hogy megnyerje a játékot. }{Az adott nyersanyagokból elkészül egy űrállomás, ami a játék végét jelenti. }
\test{Can't craft space station}{A telepes egy űrállomást szeretne elkészíteni, de nincs elegendő nyersanyaga hozzá. }{Űrállomás sikertelen készítése}
\test{Craft teleport gate}{A telepes a szükséges nyersanyagokkal egy teleportkapu-párt készít el. }{Az adott nyersanyagokból elkészül egy kapupár, amit az adott játékos elhelyez a tárhelyében. }
\test{Can't craft teleport gate}{A telepes egy teleportkapu-párt szeretne elkészíteni, de nincs elegendő nyersanyaga hozzá. }{Teleportkapu-pár sikertelen készítése}
\test{Not enough space to craft teleport gate}{A telepes raktárában nincs elég hely a teleportkapu-pár tárolására.}{Sikertelen teleportkapu-pár készítés, tárhely ellenőrzés sikeressége. }
\test{Direct robots}{Robotoknak megadja a játékos, hogy milyen nyersanyag után kutassanak.} {Robotok célzott irányítása nyersanyagkutatás céljából, kért nyersanyag tárolása.}
\test{SpaceShip remains hidden}{A telepes meg szeretne bújni, amikor már meg van bújva.}{A megbújás állapota mindaddig megmarad, amíg ki nem bújik. }
\test{SpaceShip remains unhidden}{A telepes ki szeretne bújni, amikor már ki van bújva.}{A kibújás állapota mindaddig megmarad, amíg meg nem bújik. }
\test{SpaceShip can't hide in exploded asteroid}{A telepes el szeretne bújni, de az aszteroida fel van robbanva.}{Sikertelen megbújás, felrobbant aszteroida magjába nem lehet megbújni. }
\test{SpaceShip can't hide in undrilled asteroid}{A telepes el szeretne bújni, de az aszteroida magja nincs teljesen átfúrva.}{Sikertelen megbújás, nem átfúrt aszteroida magjába nem lehet megbújni.}
\test{SpaceShip doesn't have space to hide}{Egy átfúrt magú aszteroidában meg szeretne bújni a telepes, de a mag "meg van telve".}{Sikertelen megbújás, egy átfúrt aszteroida magjában csak limitált számú telepes fér el. }
\test{SpaceShip hides}{A telepes el szeretne, és el tud bújni. }{A telepes az adott körülmények ellenőrzése után sikeresen meg tud bújni egy aszteroida magjában.}
\test{SpaceShip exits hiding}{A telepes meg van bújva, és kibújik az aszteroida magjából.}{Sikeres művelet, a telepesek ki tudnak bújni az aszteroidából és folytatni tevékenységeiket.}
\test{SpaceShip mines/UFO}{A telepes/UFO egy átfúrt magú aszteroidából tud bányászni, ha van benne elérhető nyersanyag.}{Sikeres nyersanyagbányászat művelete, a nyersanyag a telepes/UFO raktárába kerül.}
\test{SpaceShip/UFO can't mine because of explosion}{Egy felrobbant aszteroida magjában próbál bányászni a telepes.}{Sikertelen művelet, felrobbant aszteroidából nem lehet bányászni.}
\test{SpaceShip/UFO can't mine because of empty core}{Egy telepes/UFO bányászni szeretne egy üres magú aszteroidából.}{Sikertelen művelet, üres magú aszteroidából nem lehet bányászni. }
\test{SpaceShip/UFO can't mine because of crust size}{Egy telepes/UFO egy még nem átfúrt magú aszteroidából próbál bányászni. }{Sikertelen művelet, nem átfúrt magú aszteroidából nem lehet bányászni.}
\test{SpaceShip can't mine because of full inventory}{A telepes ki tudja hozni a nyersanyagot a magból, de tele van a raktára.}{Sikertelen művelet, ha tele van a raktár, nem tud bányászni.}
\test{Move asteroid field}{A Naptól mért távolság változik.}{Az aszteroidák napközeli és nem napközeli állapotokban lehetnek.}
\test{Place gate}{A telepes a raktárában lévő teleportkapu-párt le szeretné helyezni.}{Egy teleportkapu-pár sikeres elhelyezése, szomszédságok beállítása, és raktárból való eltávolítása.}
\test{Place resource in asteroid}{Az aszteroida raktárába a telepes kibányászott nyersanyagot szeretne elhelyezni.}{Sikeres elhelyezés, a nyersanyag áthelyezhető a telepes raktárából az aszteroidába. }
\test{Can't place resource in exploded asteroid}{A felrobbant aszteroida raktárába a telepes kibányászott nyersanyagot szeretne elhelyezni.}{Sikertelen művelet, felrobbant aszteroidák raktára nem elérhető. }
\test{Can't place resource in full inventory}{Az aszteroida raktára tele van, a telepes nyersanyagot szeretne elhelyezni benne. }{Sikertelen művelet, a raktárak kapacitása véges, ennek elérése után nem helyezhető bele semmi.}
\test{Can't place resource in unavailable inventory}{Az aszteroida magja nincs teljesen átfúrva, a telepes nyersanyagot szeretne elhelyezni benne.}{Sikertelen művelet, egy nem átfúrt aszteroida raktára nem elérhető.}
\test{SolarFlare}{Napkitörés indul a kör végén.}{Napkitörés hatással van az ott tartózkodó járművekre.}


\section{Tesztelést támogató segéd- és fordítóprogramok specifikálása}
%\comment{Specifikálni kell a tesztelést támogató segédprogramokat. Rövid bemutatással (elvárt funkcionalitás) specifikálni kell a tesztelést támogató segédprogramokat.}
Terveink szerint nem használunk ilyen programokat.


\section{Napló}

\begin{naplo}
	\naplotag{2021.03.27. 16:30 }{ 4 óra }{ Csapat }
	{ 
		Meeting 
	}
    \naplotag{2021.03.28. 18:30 }{ 3 óra }{ Csapat }
	{ 
		Közös feladatmegoldás
	}
	\naplotag{2021.03.28. 19:00 }{ 3 óra }{ Nagy }
	{ 
		Szekvenciák (Craft) + tesztesetek
	}

    \naplotag{2021.03.28. 21:00 }{ 1 óra }{ Sike }
	{ 
		Class diagram leírások
	}

    \naplotag{2021.03.29. 10:30 }{ 4 óra }{ Dömötör }
	{ 
		Class diagramok
	}
	\naplotag{2021.03.29. 10:30 }{ 1,5 óra }{ Tatai }
	{ 
		Kimenet leírása, dokumentum javítás/kiegészítés
	}
	\naplotag{2021.03.29. 10:30 }{ 1 óra }{ Sike }
	{ 
		UseCase leírások
	}
	\naplotag{2021.03.29. 10:30 }{ 4 óra }{ Dömötör }
	{ 
		UseCase leírások dokumentum összefűzése
	}
\end{naplo}




\end{document}