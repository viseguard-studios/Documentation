@startuml
hide footbox
title Paint MapViewPanel 

actor Player as player
participant "mapview: MapViewPanel" as mapview
participant "g: Graphics" as g
participant "scene: Scene" as scene
collections "entity: Entity" as entity
collections "asteroid: Asteroid" as asteroid



player -> mapview++: paint(g)

mapview -> mapview: super.paint(g)
mapview -> g++: setColor(<<Preferred background color>>)
g --> mapview--: return
mapview -> g++: fillRect(<<Preferred background size>>)
g --> mapview--: return 
mapview -> scene++: getEntities()
scene -->mapview--: entity
loop for each e in entity 
    mapview -> entity++: getPos()
    entity-->mapview--: pos
    mapview -> g++: setColor(<<Preferred entity color>>)
    g--> mapview--: return
    mapview -> g++: fillOval(pos,<<Preferred entity size>>)
    g--> mapview--: return

    loop for each Asteroid in entity
    mapview->asteroid++: getPhysicalNeighbours()
    asteroid-->mapview--: neighbours:Asteroid[0..*]
        loop for each n in neighbours
        mapview -> g++: drawLine(<<Asteroid position>>, <<Neighbour position>>)
        g-->mapview--: return
        end
        note right
        Szomszédságok összekötése
        end note
    end
end

mapview --> player--: return

@enduml